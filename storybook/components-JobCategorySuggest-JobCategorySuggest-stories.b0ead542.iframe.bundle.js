(self.webpackChunkwingman_fe=self.webpackChunkwingman_fe||[]).push([[915],{"../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/icons/IconTick/IconTick.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>IconTick});var jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),Box=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/Box/Box.mjs"),IconContainer=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/icons/IconContainer.mjs");const IconTickSvg=_ref=>{let{title,titleId,...props}=_ref;return(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",xmlSpace:"preserve",focusable:"false",fill:"currentColor",width:16,height:16,"aria-labelledby":titleId,...props,children:[title?(0,jsx_runtime.jsx)("title",{id:titleId,children:title}):null,(0,jsx_runtime.jsx)("path",{d:"M19.7 6.3c-.4-.4-1-.4-1.4 0L9 15.6l-3.3-3.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l4 4c.2.2.4.3.7.3s.5-.1.7-.3l10-10c.4-.4.4-1 0-1.4z"})]})},IconTick=props=>(0,jsx_runtime.jsx)(IconContainer.T,{...props,children:svgProps=>(0,jsx_runtime.jsx)(Box.a,{component:IconTickSvg,...svgProps})})},"../node_modules/.pnpm/react-fast-compare@3.2.2/node_modules/react-fast-compare/index.js":module=>{var hasElementType="undefined"!=typeof Element,hasMap="function"==typeof Map,hasSet="function"==typeof Set,hasArrayBuffer="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length,i,keys,it;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!==i--;)if(!equal(a[i],b[i]))return!1;return!0}if(hasMap&&a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(it=a.entries();!(i=it.next()).done;)if(!b.has(i.value[0]))return!1;for(it=a.entries();!(i=it.next()).done;)if(!equal(i.value[1],b.get(i.value[0])))return!1;return!0}if(hasSet&&a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(it=a.entries();!(i=it.next()).done;)if(!b.has(i.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(b)){if((length=a.length)!=b.length)return!1;for(i=length;0!==i--;)if(a[i]!==b[i])return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf&&"function"==typeof a.valueOf&&"function"==typeof b.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString&&"function"==typeof a.toString&&"function"==typeof b.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!==i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;if(hasElementType&&a instanceof Element)return!1;for(i=length;0!==i--;)if(("_owner"!==keys[i]&&"__v"!==keys[i]&&"__o"!==keys[i]||!a.$$typeof)&&!equal(a[keys[i]],b[keys[i]]))return!1;return!0}return a!=a&&b!=b}module.exports=function isEqual(a,b){try{return equal(a,b)}catch(error){if((error.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw error}}},"../node_modules/.pnpm/use-debounce@10.0.6_react@18.3.1/node_modules/use-debounce/dist/index.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d7:()=>a});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");function c(e,u,c,i){var a=this,o=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),f=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),l=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),d=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),g=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),p=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(e),w=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0);p.current=e;var s="undefined"!=typeof window,x=!u&&0!==u&&s;if("function"!=typeof e)throw new TypeError("Expected a function");u=+u||0;var h=!!(c=c||{}).leading,y=!("trailing"in c)||!!c.trailing,F="maxWait"in c,A="debounceOnServer"in c&&!!c.debounceOnServer,D=F?Math.max(+c.maxWait||0,u):null;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return w.current=!0,function(){w.current=!1}},[]);var T=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){var r=function(r){var n=m.current,t=d.current;return m.current=d.current=null,f.current=r,l.current=l.current||r,g.current=p.current.apply(t,n)},n=function(r,n){x&&cancelAnimationFrame(v.current),v.current=x?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!w.current)return!1;var n=r-o.current;return!o.current||n>=u||n<0||F&&r-f.current>=D},e=function(n){return v.current=null,y&&m.current?r(n):(m.current=d.current=null,g.current)},c=function r(){var c=Date.now();if(h&&l.current===f.current&&T(),t(c))return e(c);if(w.current){var i=u-(c-o.current),a=F?Math.min(i,D-(c-f.current)):i;n(r,a)}},T=function(){i&&i({})},W=function(){if(s||A){var e=Date.now(),i=t(e);if(m.current=[].slice.call(arguments),d.current=a,o.current=e,i){if(!v.current&&w.current)return f.current=o.current,n(c,u),h?r(o.current):g.current;if(F)return n(c,u),r(o.current)}return v.current||n(c,u),g.current}};return W.cancel=function(){var r=v.current;r&&(x?cancelAnimationFrame(v.current):clearTimeout(v.current)),f.current=0,m.current=o.current=d.current=v.current=null,r&&i&&i({})},W.isPending=function(){return!!v.current},W.flush=function(){return v.current?e(Date.now()):g.current},W},[h,F,u,D,y,x,s,A,i]);return T}function i(r,n){return r===n}function a(n,t,a){var o=a&&a.equalityFn||i,f=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(n),l=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({})[1],v=c((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(r){f.current=r,l({})},[l]),t,a,l),m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(n);return o(m.current,n)||(v(n),m.current=n),[f.current,v]}},"./lib/components/JobCategorySuggest/JobCategorySuggest.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{JobCategorySuggest:()=>JobCategorySuggest_stories_JobCategorySuggest,default:()=>JobCategorySuggest_stories});var _Strong,preview=__webpack_require__("./.storybook/preview.tsx"),react=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),MockComponentActions=__webpack_require__("./lib/private/MockComponentActions/MockComponentActions.tsx"),ApolloMockProvider=__webpack_require__("./lib/components/ApolloMockProvider/ApolloMockProvider.tsx"),jobCategories=__webpack_require__("./lib/components/JobCategorySelect/__fixtures__/jobCategories.ts"),useQuery=__webpack_require__("../node_modules/.pnpm/@apollo+client@4.0.7_graphql-ws@6.0.6_graphql@16.11.0_ws@8.18.3__graphql@16.11.0_react-_7123e37176e7dcfbcaec1ad73124907d/node_modules/@apollo/client/react/hooks/useQuery.js"),Stack=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/Stack/Stack.mjs"),Text=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/Text/Text.mjs"),Loader=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/Loader/Loader.mjs"),FieldMessage=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/FieldMessage/FieldMessage.mjs"),react_fast_compare=__webpack_require__("../node_modules/.pnpm/react-fast-compare@3.2.2/node_modules/react-fast-compare/index.js"),react_fast_compare_default=__webpack_require__.n(react_fast_compare),index_module=__webpack_require__("../node_modules/.pnpm/use-debounce@10.0.6_react@18.3.1/node_modules/use-debounce/dist/index.module.js"),RadioGroup=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/RadioGroup/RadioGroup.mjs"),RadioItem=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/RadioGroup/RadioItem.mjs"),Strong=__webpack_require__("../node_modules/.pnpm/braid-design-system@33.12.1_@types+react@18.3.25_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/braid-design-system/dist/lib/components/Strong/Strong.mjs"),flattenResourceByKey=__webpack_require__("./lib/utils/flattenResourceByKey.ts"),JobCategorySelect=__webpack_require__("./lib/components/JobCategorySelect/JobCategorySelect.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const JobCategorySuggest_JobCategorySuggestChoices=(0,react.forwardRef)((_ref,forwardedRef)=>{let{client,context,schemeId,choices,name,onSelect,label="Category",showConfidence=!1,initialValue,positionProfile,...restProps}=_ref;const suggestions=choices.map(choice=>{return{key:choice.jobCategory.id.value,label:(jobCategory=choice.jobCategory,(0,flattenResourceByKey.L)(jobCategory,"parent").reverse().map(flatJobCategory=>flatJobCategory.name).join(" > ")),confidence:choice.confidence};var jobCategory}),[selectedJobCategory,setSelectedJobCategory]=(0,react.useState)(initialValue?"Other":void 0);return(0,jsx_runtime.jsxs)(Stack.B,{space:"small",children:[(0,jsx_runtime.jsx)(Text.E,{id:"job-category-suggest-select-label",weight:"strong",children:label}),(0,jsx_runtime.jsxs)(RadioGroup.z,{...restProps,"aria-labelledby":"job-category-suggest-select-label",name,id:"job-category-suggest-select",onChange:event=>{const choiceId=event.currentTarget.value,jobCategorySuggest=choices.find(choice=>choice.jobCategory.id.value===choiceId);setSelectedJobCategory(choiceId),jobCategorySuggest&&onSelect(jobCategorySuggest)},value:selectedJobCategory??"",children:[(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:suggestions.map(choice=>(0,jsx_runtime.jsx)(RadioItem.h,{label:choice.label,ref:forwardedRef,value:choice.key,children:showConfidence&&(0,jsx_runtime.jsxs)(Text.E,{tone:"secondary",size:"small",children:[_Strong||(_Strong=(0,jsx_runtime.jsx)(Strong.O,{children:"Confidence score:"}))," ",`${(100*choice.confidence).toFixed(2)}%`]})},choice.key))}),(0,jsx_runtime.jsx)(RadioItem.h,{label:"Choose a different category",ref:forwardedRef,value:"Other"},"Other")]}),"Other"===selectedJobCategory&&(0,jsx_runtime.jsx)(JobCategorySelect.w,{client,context,label:"Category",id:"job-category-suggest-select-other",initialValue,onSelect:(jobCategory,type)=>{"child"===type&&onSelect({jobCategory,confidence:1})},schemeId,positionProfile,hideLabel:!0})]})});var lib=__webpack_require__("../node_modules/.pnpm/graphql-tag@2.12.6_graphql@16.11.0/node_modules/graphql-tag/lib/index.js");const JOB_CATEGORY_ATTRIBUTES=lib.J1`
  fragment jobCategoryAttributes on JobCategory {
    id {
      value
    }
    name
  }
`,JOB_CATEGORY_SUGGESTION_CHOICE_ATTRIBUTES=lib.J1`
  fragment jobCategorySuggestionChoiceAttributes on JobCategorySuggestionChoice {
    jobCategory {
      ...jobCategoryAttributes
      parent {
        ...jobCategoryAttributes
      }
      children {
        ...jobCategoryAttributes
      }
    }
    confidence
  }

  ${JOB_CATEGORY_ATTRIBUTES}
`,JOB_CATEGORY_SUGGEST=lib.J1`
  query JobCategorySuggest(
    $positionProfile: JobCategorySuggestionPositionProfileInput!
    $schemeId: String!
    $first: Int
  ) {
    jobCategorySuggestions(
      positionProfile: $positionProfile
      schemeId: $schemeId
      first: $first
    ) {
      ...jobCategorySuggestionChoiceAttributes
    }
  }

  ${JOB_CATEGORY_SUGGESTION_CHOICE_ATTRIBUTES}
`;var _Stack,_FieldMessage;const JobCategorySuggest=react.memo((0,react.forwardRef)((_ref,forwardedRef)=>{let{client,context,debounceDelay=250,onSelect,positionProfile,schemeId,showConfidence,initialValue,message,name,reserveMessageSpace,tone,...restProps}=_ref;const[debounceJobCategorySuggestInput]=(0,index_module.d7)(positionProfile,debounceDelay),{data:suggestData,error:suggestError,loading:suggestLoading}=(0,useQuery.I)(JOB_CATEGORY_SUGGEST,{client,context,fetchPolicy:"no-cache",variables:{positionProfile:debounceJobCategorySuggestInput,schemeId,first:5}});return(0,jsx_runtime.jsxs)(Stack.B,{space:"small",children:[suggestLoading?_Stack||(_Stack=(0,jsx_runtime.jsxs)(Stack.B,{space:"medium",children:[(0,jsx_runtime.jsx)(Text.E,{children:"Loading suggested categories"}),(0,jsx_runtime.jsx)(Loader.a,{size:"xsmall"})]})):(null==suggestData?void 0:suggestData.jobCategorySuggestions)&&(0,jsx_runtime.jsx)(JobCategorySuggest_JobCategorySuggestChoices,{...restProps,choices:suggestData.jobCategorySuggestions,name,ref:forwardedRef,initialValue,onSelect,showConfidence,tone,client,context,schemeId,positionProfile:{positionLocation:debounceJobCategorySuggestInput.positionLocation}}),message||reserveMessageSpace?(0,jsx_runtime.jsx)(FieldMessage.i,{id:"jobCategorySuggestMessage",message,reserveMessageSpace:suggestError?void 0:reserveMessageSpace,tone}):null,suggestError&&(_FieldMessage||(_FieldMessage=(0,jsx_runtime.jsx)(FieldMessage.i,{id:"jobCategorySuggestError",message:"Sorry, we couldn’t fetch category suggestions. Please try again.",tone:"critical"})))]})}),react_fast_compare_default()),mockJobCategorySuggest=[{jobCategory:{id:{value:"seekAnzPublicTest:jobCategory:seek:2EFstqFvP"},name:"Developers/Programmers",parent:{id:{value:"seekAnzPublicTest:jobCategory:seek:2BGarNJkf"},name:"Information & Communication Technology"}},confidence:.80588377},{jobCategory:{id:{value:"seekAnzPublicTest:jobCategory:seek:2FkXR4jWF"},name:"Engineering - Software",parent:{id:{value:"seekAnzPublicTest:jobCategory:seek:2BGarNJkf"},name:"Information & Communication Technology"}},confidence:.1529567}],MockJobCategorySuggest=(0,react.forwardRef)((_ref,ref)=>{let{client:_client,showStorybookAction,...props}=_ref;return(0,jsx_runtime.jsx)(ApolloMockProvider.f,{resolvers:{Query:{jobCategorySuggestions:()=>mockJobCategorySuggest,jobCategories:()=>jobCategories.S}},children:(0,jsx_runtime.jsx)(MockComponentActions.B,{space:"medium",showStorybookAction,storybookPath:"/story/job-posting-job-categories-jobcategorysuggest--job-category-suggest",sourcePath:"lib/components/JobCategorySuggest",children:(0,jsx_runtime.jsx)(JobCategorySuggest,{...props,ref})})})}),JobCategorySuggest_stories={args:{label:"Category",message:"undefined",onSelect:()=>{},positionProfile:{positionTitle:"Senior Developer",positionLocation:["seekAnzPublicTest:location:seek:2FqwWaaMV"]},reserveMessageSpace:!1,schemeId:"seekAnz",tone:preview.defaultArgs.tone},argTypes:{message:{control:{type:"radio"},mapping:{undefined:void 0,requiredValidation:"Select a category"},options:["undefined","requiredValidation"]},showStorybookAction:preview.defaultArgTypes.showStorybookAction,tone:preview.defaultArgTypes.tone},component:MockJobCategorySuggest,title:"Job Posting/Job categories/JobCategorySuggest"},JobCategorySuggest_stories_JobCategorySuggest={}},"./lib/utils/flattenResourceByKey.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>flattenResourceByKey});const flattenResourceByKey=(resource,key)=>{const castedResource=resource;return[resource].concat(castedResource[key]?flattenResourceByKey(castedResource[key],key):[])}}}]);
//# sourceMappingURL=components-JobCategorySuggest-JobCategorySuggest-stories.b0ead542.iframe.bundle.js.map